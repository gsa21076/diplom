(()=>{"use strict";var e,t,n,o,c,l,r,s,a,u,i,d,m;sessionStorage.myOrder=JSON.stringify({useCalc:!1,numberBox:1,diam1:1.4,number1:1,diam2:1.4,number2:1,bottom:!1,distanse:0,sum:1e4,question:""}),s=document.querySelector(".popup-call"),a=document.querySelector(".popup-consultation"),u=document.querySelector(".popup-check"),i=document.querySelector(".popup-discount"),d=document.querySelectorAll(".popup"),m=document.querySelectorAll(".btn"),document.querySelectorAll(".popup-close"),document.querySelectorAll("input[name=user_name]"),document.querySelector("input[name=user_quest]"),document.querySelectorAll(".phone-user"),m.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.classList.contains("call-btn")&&(s.style.display="block"),t.classList.contains("discount-btn")&&(i.style.display="block"),t.classList.contains("check-btn")&&(u.style.display="block"),t.classList.contains("director-btn")&&(a.style.display="block")}))})),d.forEach((function(e){e.addEventListener("click",(function(t){var n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"))||(e.style.display="none")}))})),c=document.getElementById("accordion-two"),l=c.querySelectorAll(".panel-heading"),r=c.querySelectorAll(".panel-collapse"),c.addEventListener("click",(function(e){e.preventDefault();var t=e.target;(t=t.closest(".panel-heading")).classList.contains("panel-heading")&&l.forEach((function(e,n){e===t&&function(e){for(var t=0;t<r.length;t++)e===t?r[t].classList.add("in"):r[t].classList.remove("in")}(n)}))})),function(){var e=JSON.parse(sessionStorage.myOrder),t=document.getElementById("accordion"),n=t.querySelectorAll(".panel-default"),o=t.querySelectorAll(".panel-collapse"),c=document.getElementById("myonoffswitch"),l=document.getElementById("myonoffswitch-two"),r=document.getElementById("calc-result"),s=t.querySelector(".box-two"),a=t.querySelector(".distanse"),u=t.querySelector(".first-diam"),i=t.querySelector(".first-number"),d=t.querySelector(".second-diam"),m=t.querySelector(".second-number"),p=document.querySelector(".popup-discount"),f=0,y=0,v=0,b=0,S=1e4,h=5e3;s.style.display="none";var q=function(e){for(var t=0;t<o.length;t++)e===t?o[t].classList.add("in"):o[t].classList.remove("in")};t.addEventListener("click",(function(t){t.preventDefault();var o=t.target;o.closest(".panel-one")&&o.closest(".onoffswitch")&&(c.checked?(c.checked=!1,e.numberBox=2,s.style.display="block"):(c.checked=!0,e.numberBox=1,s.style.display="none")),o.closest(".panel-two")&&o.closest(".form-control")&&("1.4 метра"===u.value&&(f=0),"2 метра"===u.value&&(e.diam1=2,f=.2),"1 штука"===i.value&&(y=0),"2 штуки"===i.value&&(e.number1=2,y=.3),"3 штуки"===i.value&&(e.number1=3,y=.5),"1.4 метра"===d.value&&(v=0),"2 метра"===d.value&&(e.diam2=2,v=.2),"1 штука"===m.value&&(b=0),"2 штуки"===m.value&&(e.number2=2,b=.2),"3 штуки"===m.value&&(e.number2=3,b=.4)),o.closest(".panel-three")&&o.closest(".onoffswitch-two")&&(l.checked?(l.checked=!1,e.bottom=!1):(l.checked=!0,e.bottom=!0)),o.closest(".panel-four")&&o.closest(".distanse")&&a.addEventListener("input",(function(){e.distanse=a.value})),o.closest(".construct-btn")?(o.closest(".call-btn")&&(p.style.display="block"),n.forEach((function(e,t){e===o.closest(".panel-default")&&(t++,q(t))}))):(o=o.closest(".panel-default")).classList.contains("panel-default")&&n.forEach((function(e,t){e===o&&q(t)})),function(){var t=0;1===e.numberBox&&(t=S+S*f+S*y),2===e.numberBox&&(t=S+S*f+S*y+h+h*v+h*b),e.bottom&&(1===e.numberBox?(t+=.1*t,e.bottom=!0):(t+=.2*t,e.bottom=!0)),e.sum=t,e.useCalc=!0,sessionStorage.myOrder=JSON.stringify(e);var n=+r.textContent,o=setInterval((function(){n<t&&(n+=50,r.textContent=n,n>=t&&(r.textContent=t,clearInterval(o))),n>t&&(n-=50,r.textContent=n,n<=t&&(r.textContent=t,clearInterval(o)))}),1)}()}))}(),function(){var e=JSON.parse(sessionStorage.myOrder),t=document.querySelectorAll("form"),n=document.querySelectorAll("input[name=user_name]"),o=document.querySelectorAll(".phone-user"),c=document.querySelector("input[name=user_quest]"),l=document.querySelectorAll(".popup"),r=document.createElement("div");r.style.cssText="font-size: 1,5rem;\n    color: black;",o.forEach((function(e){e.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/^(\+)?([- ()]?\d[- _()]?){12,15}$/,"")}))})),n.forEach((function(e){e.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^А-яЁё\ \,\.]/g,"-")}))})),c.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^А-яЁё\ \, \.]*$/gi,"")})),t.forEach((function(t){t.addEventListener("submit",(function(s){s.preventDefault(),e=JSON.parse(sessionStorage.myOrder),t.append(r),r.textContent="Загрузка...",e.question=c.value;var a,u=new FormData(t),i={};u.forEach((function(e,t){i[t]=e})),(a=Object.assign(i,e),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).then((function(e){if(200!==e.status)throw new Error("status network not 200");r.textContent="Спасибо! Мы скоро с Вами свяжемся."})).catch((function(e){r.textContent="Что-то пошло не так...",console.error(e)})),c.required=!1,l.forEach((function(e){setTimeout((function(){e.style.display="none",n.forEach((function(e){return e.value=""})),o.forEach((function(e){return e.value=""})),c.value="",r.textContent=""}),3e3)}))}))})),e={useCalc:!1,numberBox:1,diam1:1.4,number1:1,diam2:1.4,number2:1,bottom:!1,distanse:0,sum:1e4,question:""},sessionStorage.myOrder=JSON.stringify(e)}(),e=document.querySelector(".add-sentence-btn"),(t=document.querySelector(".sentence")).querySelectorAll(".shadow-block"),n=t.querySelectorAll(".hidden"),o=t.querySelector(".visible-sm-block"),e.addEventListener("click",(function(){n.forEach((function(t){o.classList.remove("visible-sm-block"),t.classList.remove("hidden"),e.style.display="none"}))}))})();